{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"servers":[{"url":"/api/v1"}],"paths":{"/notebooks":{"get":{"tags":["notebooks"],"summary":"List Notebooks","description":"Retrieve all notebooks for the authenticated user.\n\nArgs:\n    request (Request): The incoming request object containing user authentication\n    db (Client): Database client dependency\n\nReturns:\n    NotebooksGetResponse: List of notebooks belonging to the user","operationId":"list_notebooks_notebooks_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotebooksGetResponse"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["notebooks"],"summary":"Create Notebook","description":"Create a new notebook for the authenticated user.\n\nArgs:\n    request (Request): The incoming request object containing user authentication\n    notebook (NotebookPostRequest): The notebook data to be created\n    db (Client): Database client dependency\n\nReturns:\n    NotebookPostResponse: The created notebook data","operationId":"create_notebook_notebooks_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotebookPostRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotebookPostResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/notebooks/{notebook_id}/contexts":{"get":{"tags":["notebooks","contexts"],"summary":"Get Contexts","description":"List all contexts associated with a specific notebook.","operationId":"get_contexts_notebooks__notebook_id__contexts_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContextsGetResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/notebooks/{notebook_id}/contexts/{context_id}":{"get":{"tags":["notebooks","contexts"],"summary":"Get Context","description":"Get metadata for a specific context.\n\nArgs:\n    context_id: ID of the context to retrieve\n    notebook_id: ID of the notebook containing the context\n\nReturns:\n    ContextGetResponse: Context metadata with signed URL","operationId":"get_context_notebooks__notebook_id__contexts__context_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"context_id","in":"path","required":true,"schema":{"type":"string","title":"Context Id"}},{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContextGetResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/notebooks/{notebook_id}/contexts/metadata":{"post":{"tags":["notebooks","contexts"],"summary":"Upload Metadata","description":"Upload metadata for a new context.\n\nArgs:\n    notebook_id (str): The ID of the notebook\n    context (ContextMetadataPostRequest): Context metadata\n    db (Client): Database client dependency\n    current_user (dict): Current authenticated user\n\nReturns:\n    ContextMetadataPostResponse: Created context with signed upload URL\n\nRaises:\n    HTTPException: 500 if context creation fails","operationId":"upload_metadata_notebooks__notebook_id__contexts_metadata_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContextMetadataPostRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContextMetadataPostResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/notebooks/{notebook_id}/contexts/{context_id}/chunk":{"post":{"tags":["notebooks","contexts"],"summary":"Process Document Chunks","description":"Process and store document chunks for a given context.\n\nArgs:\n    context_id (str): The ID of the context\n    notebook_id (str): The ID of the notebook\n    db (Client): Database client dependency\n    current_user (dict): Current authenticated user\n\nRaises:\n    HTTPException: 403 if user is not the notebook owner\n    HTTPException: 404 if context not found\n    HTTPException: 500 if processing fails","operationId":"process_document_chunks_notebooks__notebook_id__contexts__context_id__chunk_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"context_id","in":"path","required":true,"schema":{"type":"string","title":"Context Id"}},{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/notebooks/{notebook_id}/contexts/{context_id}/file":{"get":{"tags":["notebooks","contexts"],"summary":"Get File","description":"Get a signed URL for accessing a context file from storage.","operationId":"get_file_notebooks__notebook_id__contexts__context_id__file_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}},{"name":"context_id","in":"path","required":true,"schema":{"type":"string","title":"Context Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContextFileGetResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/notebooks/{notebook_id}/chat":{"post":{"tags":["notebooks","chat"],"summary":"Chat With Notebook","description":"Generate a chat response for a given notebook.\n\nArgs:\n    notebook_id (str): ID of the notebook to chat with\n    chat_request (ChatRequest): Contains message, history and optional context_ids\n    request (Request): FastAPI request object\n    db (Client): Database client\n\nReturns:\n    ChatResponse: Contains generated response and source references\n\nRaises:\n    HTTPException: If user is not the notebook owner","operationId":"chat_with_notebook_notebooks__notebook_id__chat_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"notebook_id","in":"path","required":true,"schema":{"type":"string","title":"Notebook Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"tags":["users"],"summary":"Get User","description":"Get the current user's information.\n\nArgs:\n    request (Request): The incoming request object\n    db (Client): Database client dependency\n\nReturns:\n    User: The current user's information","operationId":"get_user_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"HTTPBearer":[]}]}},"/healthz/healthz":{"get":{"tags":["healthz"],"summary":"Health","description":"Health check endpoint.\n\nReturns:\n    dict: API status information","operationId":"health_healthz_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ChatMessage":{"properties":{"role":{"type":"string","title":"Role"},"content":{"type":"string","title":"Content"}},"type":"object","required":["role","content"],"title":"ChatMessage","description":"A single message in a chat conversation."},"ChatMessageMetadata":{"properties":{"page":{"type":"integer","title":"Page"}},"type":"object","required":["page"],"title":"ChatMessageMetadata","description":"Metadata for a chat message."},"ChatMessageSource":{"properties":{"context_id":{"type":"string","title":"Context Id"},"content":{"type":"string","title":"Content"},"similarity":{"type":"number","title":"Similarity"},"metadata":{"$ref":"#/components/schemas/ChatMessageMetadata"},"citation_id":{"type":"string","title":"Citation Id"}},"type":"object","required":["context_id","content","similarity","metadata","citation_id"],"title":"ChatMessageSource","description":"A source for a chat message."},"ChatRequest":{"properties":{"message":{"type":"string","title":"Message"},"context_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Context Ids"},"history":{"anyOf":[{"items":{"$ref":"#/components/schemas/ChatMessage"},"type":"array"},{"type":"null"}],"title":"History"}},"type":"object","required":["message"],"title":"ChatRequest","description":"Schema for incoming chat API requests."},"ChatResponse":{"properties":{"message":{"type":"string","title":"Message"},"sources":{"items":{"$ref":"#/components/schemas/ChatMessageSource"},"type":"array","title":"Sources"}},"type":"object","required":["message","sources"],"title":"ChatResponse","description":"Schema for outgoing chat API responses."},"ContextFileGetResponse":{"properties":{"url":{"type":"string","title":"Url","description":"Signed URL for accessing the context file"},"mediaType":{"type":"string","title":"Mediatype","description":"The media type of the file"}},"type":"object","required":["url","mediaType"],"title":"ContextFileGetResponse","description":"Response model for getting a context file."},"ContextGetResponse":{"properties":{"name":{"type":"string","title":"Name","description":"The name of the context"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"The description of the context"},"type":{"$ref":"#/components/schemas/ContextType","description":"The type of the context, e.g., PDF, text"},"originalFileName":{"type":"string","title":"Originalfilename","description":"The name of the context file"},"id":{"type":"string","title":"Id","description":"The unique identifier of the context"},"url":{"type":"string","title":"Url","description":"The URL of where the context is stored"}},"type":"object","required":["name","type","originalFileName","id","url"],"title":"ContextGetResponse","description":"Response model for getting a single context."},"ContextMetadataPostRequest":{"properties":{"name":{"type":"string","title":"Name","description":"The name of the context"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"The description of the context"},"type":{"$ref":"#/components/schemas/ContextType","description":"The type of the context, e.g., PDF, text"},"originalFileName":{"type":"string","title":"Originalfilename","description":"The name of the context file"}},"type":"object","required":["name","type","originalFileName"],"title":"ContextMetadataPostRequest","description":"Request model for posting context metadata."},"ContextMetadataPostResponse":{"properties":{"name":{"type":"string","title":"Name","description":"The name of the context"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"The description of the context"},"type":{"$ref":"#/components/schemas/ContextType","description":"The type of the context, e.g., PDF, text"},"originalFileName":{"type":"string","title":"Originalfilename","description":"The name of the context file"},"id":{"type":"string","title":"Id","description":"The unique identifier of the context"},"signedUploadUrl":{"type":"string","title":"Signeduploadurl","description":"Signed URL for uploading context file"}},"type":"object","required":["name","type","originalFileName","id","signedUploadUrl"],"title":"ContextMetadataPostResponse","description":"Response model for posting context metadata."},"ContextType":{"type":"string","enum":["pdf","external_url","free_form_text"],"title":"ContextType","description":"Enumeration of supported context types for document processing."},"ContextsGetResponse":{"properties":{"contexts":{"items":{"$ref":"#/components/schemas/ContextGetResponse"},"type":"array","title":"Contexts","description":"The list of contexts"}},"type":"object","required":["contexts"],"title":"ContextsGetResponse","description":"Response model for getting multiple contexts."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"NotebookGetResponse":{"properties":{"name":{"type":"string","title":"Name","description":"The name of the notebook"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"The description of the notebook"},"id":{"type":"string","title":"Id","description":"The unique identifier of the notebook"},"createdAt":{"type":"string","format":"date-time","title":"Createdat","description":"The date and time the notebook was created"},"updatedAt":{"type":"string","format":"date-time","title":"Updatedat","description":"The date and time the notebook was last updated"},"ownerId":{"type":"string","title":"Ownerid","description":"The unique identifier of the user who owns the notebook"}},"type":"object","required":["name","id","createdAt","updatedAt","ownerId"],"title":"NotebookGetResponse","description":"Response model for getting a single notebook.\n\nAttributes:\n    owner_id: Unique identifier of the notebook owner"},"NotebookPostRequest":{"properties":{"name":{"type":"string","title":"Name","description":"The name of the notebook"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"The description of the notebook"}},"type":"object","required":["name"],"title":"NotebookPostRequest","description":"Request model for creating a new notebook."},"NotebookPostResponse":{"properties":{"name":{"type":"string","title":"Name","description":"The name of the notebook"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"The description of the notebook"},"id":{"type":"string","title":"Id","description":"The unique identifier of the notebook"},"createdAt":{"type":"string","format":"date-time","title":"Createdat","description":"The date and time the notebook was created"},"updatedAt":{"type":"string","format":"date-time","title":"Updatedat","description":"The date and time the notebook was last updated"}},"type":"object","required":["name","id","createdAt","updatedAt"],"title":"NotebookPostResponse","description":"Response model for notebook creation endpoint."},"NotebooksGetResponse":{"properties":{"notebooks":{"items":{"$ref":"#/components/schemas/NotebookGetResponse"},"type":"array","title":"Notebooks","description":"The list of notebooks"}},"type":"object","required":["notebooks"],"title":"NotebooksGetResponse","description":"Response model for getting multiple notebooks.\n\nAttributes:\n    notebooks: List of notebook responses"},"User":{"properties":{"id":{"type":"string","title":"Id"},"email":{"type":"string","title":"Email"},"name":{"type":"string","title":"Name"},"profileImageUrl":{"type":"string","title":"Profileimageurl"}},"type":"object","required":["id","email","name","profileImageUrl"],"title":"User","description":"Pydantic model representing a user in the system."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}